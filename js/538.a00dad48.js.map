{"version":3,"file":"js/538.a00dad48.js","mappings":"kMACOA,MAAM,qD,GACTC,EAAAA,EAAAA,GAA2B,MAAvBD,MAAM,QAAO,SAAK,G,GAWjBA,MAAM,4D,GACXC,EAAAA,EAAAA,GASQ,SATDD,MAAM,sBAAoB,EAC/BC,EAAAA,EAAAA,GAOK,YANHA,EAAAA,EAAAA,GAAW,UAAP,OACJA,EAAAA,EAAAA,GAAc,UAAV,UACJA,EAAAA,EAAAA,GAAgB,UAAZ,YACJA,EAAAA,EAAAA,GAAa,UAAT,SACJA,EAAAA,EAAAA,GAAa,UAAT,SACJA,EAAAA,EAAAA,GAAa,UAAT,YAPR,G,GAYQD,MAAM,W,GAKRC,EAAAA,EAAAA,GAAkC,QAA5BD,MAAM,WAAU,SAAK,G,SACIA,MAAM,wB,SAGxBA,MAAM,c,GAKdA,MAAM,0B,qDAwBdA,MAAM,Q,qJA/DXC,EAAAA,EAAAA,GAWM,MAXN,EAWM,CAVJC,GACAD,EAAAA,EAAAA,GAQM,aAPJA,EAAAA,EAAAA,GAMS,UALPD,MAAM,kBACNG,KAAK,SACJC,QAAK,oBAAOC,MAAMC,MAAMC,WAAS,QACnC,gBAKLN,EAAAA,EAAAA,GAgDQ,QAhDR,EAgDQ,CA/CNO,GAUAP,EAAAA,EAAAA,GAoCQ,6BAnCNQ,EAAAA,EAAAA,IAkCKC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAlCyBC,EAAAA,SAAO,CAAzBC,EAAQC,M,WAApBL,EAAAA,EAAAA,IAkCK,MAlCmCM,IAAG,IAAQD,GAAnD,EACEb,EAAAA,EAAAA,GAAwC,KAAxC,GAAwCe,EAAAA,EAAAA,IAAjBF,EAAQ,GAAH,IAC5Bb,EAAAA,EAAAA,GAA2B,WAAAe,EAAAA,EAAAA,IAApBH,EAAOI,OAAK,IACnBhB,EAAAA,EAAAA,GAA+B,WAAAe,EAAAA,EAAAA,IAAxBH,EAAOK,SAAU,KAAE,IAC1BjB,EAAAA,EAAAA,GAAoE,WAAAe,EAAAA,EAAAA,IAAAA,IAAzDG,KAAoB,IAAfN,EAAOO,UAAiBC,sBAAkB,IAC1DpB,EAAAA,EAAAA,GAQK,WAPHqB,EACYT,EAAOU,aAAAA,EAAAA,EAAAA,OAAnBd,EAAAA,EAAAA,IAEO,OAFP,EAA4D,YAA5D,WAGAA,EAAAA,EAAAA,IAEO,OAFP,EAAgC,aAIlCR,EAAAA,EAAAA,GAmBK,YAlBHA,EAAAA,EAAAA,GAiBM,MAjBN,EAiBM,EAhBJA,EAAAA,EAAAA,GAOS,UANPD,MAAM,0BACNG,KAAK,SACJC,QAAK,QAAOC,MAAMC,MAAMC,WAAS,EAAQM,GACzCW,SAAUZ,EAAAA,iBAAmBC,EAAOY,IACtC,OAED,EAAAC,IACAzB,EAAAA,EAAAA,GAOS,UANPD,MAAM,yBACNG,KAAK,SACJC,QAAK,QAAOC,MAAMsB,YAAYpB,UAAUM,GACxCW,SAAUZ,EAAAA,iBAAmBC,EAAOY,IACtC,OAED,EAAAG,YA/BN,WAuCJ3B,EAAAA,EAAAA,GAKM,MALN,EAKM,EAJJ4B,EAAAA,EAAAA,IAGkBC,EAAA,CAFfC,WAAYnB,EAAAA,WACZoB,aAAaC,EAAAA,YAFhB,yCAOFJ,EAAAA,EAAAA,IAIeK,EAAA,CAHbC,IAAI,QACHC,aAAaH,EAAAA,WACbI,YAAYJ,EAAAA,WAHf,wCAOAJ,EAAAA,EAAAA,IAGeS,EAAA,CAFbH,IAAI,cACHI,UAAUN,EAAAA,cAFb,2B,uBC9EKjC,MAAM,aAAamC,IAAI,cAAcK,SAAS,M,GAC5CxC,MAAM,8D,GACJA,MAAM,0B,aAGPC,EAAAA,EAAAA,GAOM,OAPDD,MAAM,2BAAyB,EAClCC,EAAAA,EAAAA,GAEK,MAFDD,MAAM,0BAAyB,YAGnCC,EAAAA,EAAAA,GAEU,UAFFE,KAAK,SAASH,MAAM,qBAC1B,kBAAgB,QAAQ,aAAW,YALvC,G,GAAAyC,G,aAUAxC,EAAAA,EAAAA,GAOM,OAPDD,MAAM,2BAAyB,EAClCC,EAAAA,EAAAA,GAEK,MAFDD,MAAM,0BAAyB,YAGnCC,EAAAA,EAAAA,GAEU,UAFFE,KAAK,SAASH,MAAM,qBAC1B,kBAAgB,QAAQ,aAAW,YALvC,G,GAAA0C,G,GAWG1C,MAAM,c,GACJA,MAAM,Q,GACTC,EAAAA,EAAAA,GAA0D,SAAnDD,MAAM,aAAa2C,IAAI,gBAAe,SAAK,G,GAU/C3C,MAAM,Q,GACTC,EAAAA,EAAAA,GAAuD,SAAhDD,MAAM,aAAa2C,IAAI,eAAc,OAAG,G,GAU5C3C,MAAM,Q,GACTC,EAAAA,EAAAA,GAA4D,SAArDD,MAAM,aAAa2C,IAAI,mBAAkB,QAAI,G,GASjD3C,MAAM,Q,GACTC,EAAAA,EAAAA,GAAoE,SAA7DD,MAAM,aAAa2C,IAAI,kBAAiB,iBAAa,G,GAgBzD3C,MAAM,Q,GACJA,MAAM,0B,GACTC,EAAAA,EAAAA,GAAkC,QAA5BD,MAAM,WAAU,SAAK,G,SAWzBA,MAAM,wCACN2C,IAAI,c,SAKJ3C,MAAM,8BACN2C,IAAI,c,GASP3C,MAAM,gB,uBAmBTC,EAAAA,EAAAA,GAMS,UALPD,MAAM,oBACNG,KAAK,SACL,kBAAgB,SACjB,QAED,G,0CAlIRM,EAAAA,EAAAA,IAuIM,MAvIN,EAuIM,EAtIJR,EAAAA,EAAAA,GAqIM,MArIN,EAqIM,EApIJA,EAAAA,EAAAA,GAmIM,MAnIN,EAmIM,CAjIOW,EAAAA,cAAAA,EAAAA,EAAAA,OAAXH,EAAAA,EAAAA,IASM,MAAAD,EAAAc,MATN,WAUAb,EAAAA,EAAAA,IASM,MAAAmC,EAAAC,KAGN5C,EAAAA,EAAAA,GA4EM,MA5EN,EA4EM,EA3EJA,EAAAA,EAAAA,GAUM,MAVN,EAUM,CATJ6C,GASI,SARJ7C,EAAAA,EAAAA,GAOE,SANAD,MAAM,eACNG,KAAK,OACLsB,GAAG,e,qCACMb,EAAAA,OAAOK,MAAK8B,GACrBC,YAAY,WACZC,SAAA,IANF,iBAIWrC,EAAAA,OAAOK,YAKpBhB,EAAAA,EAAAA,GAUM,MAVN,EAUM,CATJiD,GASI,SARJjD,EAAAA,EAAAA,GAOE,SANAD,MAAM,eACNG,KAAK,OACLsB,GAAG,c,qCACMb,EAAAA,OAAOuC,KAAIJ,GACpBC,YAAY,SACZC,SAAA,IANF,iBAIWrC,EAAAA,OAAOuC,WAKpBlD,EAAAA,EAAAA,GASM,MATN,EASM,CARJmD,GAQI,SAPJnD,EAAAA,EAAAA,GAME,SALAD,MAAM,eACNG,KAAK,OACLsB,GAAG,kB,qCACMb,EAAAA,SAAQmC,GACjBE,SAAA,IALF,iBAIWrC,EAAAA,eAIbX,EAAAA,EAAAA,GAgBM,MAhBN,EAgBM,CAfJoD,GAeI,SAdJpD,EAAAA,EAAAA,GAaE,SAZAD,MAAM,eACNG,KAAK,SACLsB,GAAG,iB,qCACab,EAAAA,OAAOM,QAAO6B,GAC9BC,YAAY,UACZM,IAAI,IACJC,IAAI,MACJC,QAAQ,yKAIRP,SAAA,IAZF,iBAIkBrC,EAAAA,OAAOM,aAAAA,EAAAA,C,QAAvB,SAWJjB,EAAAA,EAAAA,GAyBM,MAzBN,EAyBM,EAxBJA,EAAAA,EAAAA,GAuBM,MAvBN,EAuBM,CAtBJwD,GAsBI,SArBJxD,EAAAA,EAAAA,GAQE,SAPAD,MAAM,mBACNG,KAAK,WACLsB,GAAG,a,qCACMb,EAAAA,OAAOW,WAAUwB,GACzB,aAAY,EACZ,cAAa,EACdE,SAAA,IAPF,iBAIWrC,EAAAA,OAAOW,cAKLX,EAAAA,OAAOW,aAAAA,EAAAA,EAAAA,OAApBd,EAAAA,EAAAA,IAKQ,QALR,EAGC,YAHD,WAMAA,EAAAA,EAAAA,IAKQ,QALR,EAGC,iBAQPR,EAAAA,EAAAA,GA0BM,MA1BN,EA0BM,CAzBOW,EAAAA,cAAAA,EAAAA,EAAAA,OAAXH,EAAAA,EAAAA,IAQM,MAAAiD,EAAA,EAPJzD,EAAAA,EAAAA,GAMS,UALPD,MAAM,kBACNG,KAAK,SACJC,QAAK,eAAEuD,EAAAA,MAAK,cAAgB/C,EAAAA,UAC9B,eALH,WASAH,EAAAA,EAAAA,IAQM,MAAAmD,EAAA,EAPJ3D,EAAAA,EAAAA,GAMS,UALPD,MAAM,kBACNG,KAAK,SACJC,QAAK,eAAEuD,EAAAA,MAAK,aAAe/C,EAAAA,OAAOa,GAAIb,EAAAA,UACxC,aAIHiD,SA5HR,K,uBA6IF,GACEC,OACE,MAAO,CACLxD,MAAO,GACPO,OAAQ,GACRO,SAAU,GACV2C,aAAa,IAGjBC,QAAS,CACPzD,UAAUwD,EAAalD,GAGrB,GAFAoD,KAAKF,YAAcA,EAEfA,EACFE,KAAKpD,OAAS,GACdoD,KAAK7C,SAAW,OACX,CACL6C,KAAKpD,OAASqD,KAAKC,MAAMD,KAAKE,UAAUvD,IAExC,MAAMwD,EAAc,IAAIlD,KAA4B,IAAvB8C,KAAKpD,OAAOO,UAAiBkD,cAAcC,MAAM,MAC7EN,KAAK7C,UAAYiD,EAEpBJ,KAAK3D,MAAMkE,QAEbC,aACER,KAAK3D,MAAMoE,SAGfC,MAAO,CAELvD,WACE6C,KAAKpD,OAAOO,SAAWwD,KAAKC,MAAM,IAAI1D,KAAK8C,KAAK7C,UAAY,OAGhE0D,UACEb,KAAK3D,MAAQ,IAAIyE,IAAJ,CAAUd,KAAK5D,MAAM2E,YAAa,CAC7CC,SAAU,SACVC,UAAU,M,QC9KhB,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,KAEpE,Q,qBFmFA,IACErB,OACE,MAAO,CACLsB,QAAS,GACTrD,WAAY,GACZsD,eAAgB,GAChBC,OAAQ,KAGZC,WAAY,CACVC,YADU,EAEVC,eAFU,IAGVC,YAAAA,GAAAA,GAEFC,OAAQ,CAAC,WACT3B,QAAS,CAEP4B,WAAWC,EAAO,GAChB5B,KAAKqB,OAASrB,KAAK6B,SAAStB,OAC5B,MAAMuB,EAAS,4FACoEF,YAEnF5B,KAAK+B,MAAMC,IAAIF,GACZG,MAAMC,IACL,MAAM,QAAEf,EAAF,WAAWrD,GAAeoE,EAAIrC,KACpCG,KAAKmB,QAAUA,EACfnB,KAAKlC,WAAaA,EAClBkC,KAAKqB,OAAOZ,UAEb0B,OAAOC,IACNpC,KAAKqC,QAAQC,KAAK,eAAgB,CAChCC,MAAO,SACPvF,MAAO,QACPwF,QAASJ,EAAIK,SAAS5C,KAAK6C,UAE7B1C,KAAKqB,OAAOZ,WAIlBkC,WAAW/F,GACT,MAAMkF,EAAS,4FAGf9B,KAAK+B,MAAMa,KAAKd,EAAQ,CAAEjC,KAAMjD,IAC7BqF,MAAMC,IACLlC,KAAK5D,MAAMC,MAAMmE,aACjBR,KAAK2B,aACL3B,KAAKqC,QAAQC,KAAK,eAAgB,CAChCC,MAAO,UACPvF,MAAO,QACPwF,QAAU,GAAEN,EAAIrC,KAAK6C,WAAW9F,EAAOI,aAG1CmF,OAAOC,IACNpC,KAAKqC,QAAQC,KAAK,eAAgB,CAChCC,MAAO,SACPvF,MAAO,QACPwF,QAASJ,EAAIK,SAAS5C,KAAK6C,cAKnCG,UAAUC,EAAKlG,GACboD,KAAKoB,eAAiB0B,EACtB,MAAMhB,EAAS,qFAC6DgB,YAE5E9C,KAAK+B,MAAMgB,IAAIjB,EAAQ,CAAEjC,KAAMjD,IAC5BqF,MAAMC,IACLlC,KAAK5D,MAAMC,MAAMmE,aACjBR,KAAK2B,aACL3B,KAAKqC,QAAQC,KAAK,eAAgB,CAChCC,MAAO,UACPvF,MAAO,QACPwF,QAAU,GAAEN,EAAIrC,KAAK6C,WAAW9F,EAAOI,UAEzCgD,KAAKoB,eAAiB,MAEvBe,OAAOC,IACNpC,KAAKqC,QAAQC,KAAK,eAAgB,CAChCC,MAAO,SACPvF,MAAO,QACPwF,QAASJ,EAAIK,SAAS5C,KAAK6C,UAE7B1C,KAAKoB,eAAiB,OAI5B4B,aAAaF,GACX9C,KAAKoB,eAAiB0B,EACtB,MAAMhB,EAAS,qFAC6DgB,YAE5E9C,KAAK+B,MAAMkB,OAAOnB,GACfG,MAAMC,IACLlC,KAAK2B,aACL3B,KAAKqC,QAAQC,KAAK,eAAgB,CAChCC,MAAO,SACPvF,MAAO,QACPwF,QAASN,EAAIrC,KAAK6C,UAEpB1C,KAAKoB,eAAiB,GACtBpB,KAAK5D,MAAMsB,YAAY8C,gBAExB2B,OAAOC,IACNpC,KAAKqC,QAAQC,KAAK,eAAgB,CAChCC,MAAO,SACPvF,MAAO,QACPwF,QAASJ,EAAIK,SAAS5C,KAAK6C,UAE7B1C,KAAKoB,eAAiB,GACtBpB,KAAK5D,MAAMsB,YAAY8C,kBAI/BK,UACEb,KAAK2B,eGzMT,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAASuB,KAEpE","sources":["webpack://homework02/./src/views/CouponsView.vue","webpack://homework02/./src/components/CouponModal.vue","webpack://homework02/./src/components/CouponModal.vue?3d2f","webpack://homework02/./src/views/CouponsView.vue?6fc5"],"sourcesContent":["<template>\n  <div class=\"d-flex justify-content-between align-items-center\">\n    <h1 class=\"my-3\">優惠券列表</h1>\n    <div>\n      <button\n        class=\"btn btn-success\"\n        type=\"button\"\n        @click=\"this.$refs.modal.openModal(true, {})\"\n      >\n        新增優惠券\n      </button>\n    </div>\n  </div>\n  <table class=\"table table-striped table-hover align-middle text-center\">\n    <thead class=\"bg-dark text-white\">\n      <tr>\n        <th>編號</th>\n        <th>優惠券名稱</th>\n        <th>優惠折扣(%)</th>\n        <th>使用期限</th>\n        <th>是否啟用</th>\n        <th>編輯內容</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr v-for=\"(coupon, index) in coupons\" :key=\"'c' + index\">\n        <td class=\"fw-bold\">{{ index + 1 }}</td>\n        <td>{{ coupon.title }}</td>\n        <td>{{ coupon.percent }} %</td>\n        <td>{{ new Date(coupon.due_date * 1000).toLocaleDateString() }}</td>\n        <td>\n          <span class=\"fw-bold\">啟用狀態：</span>\n          <span v-if=\"coupon.is_enabled\" class=\"text-success fw-bold\">\n            已啟用\n          </span>\n          <span v-else class=\"text-muted\">\n            未啟用\n          </span>\n        </td>\n        <td>\n          <div class=\"btn-group btn-group-sm\">\n            <button\n              class=\"btn btn-outline-primary\"\n              type=\"button\"\n              @click=\"this.$refs.modal.openModal(false, coupon)\"\n              :disabled=\"selectedItemId === coupon.id\"\n            >\n              修改\n            </button>\n            <button\n              class=\"btn btn-outline-danger\"\n              type=\"button\"\n              @click=\"this.$refs.deleteModal.openModal(coupon)\"\n              :disabled=\"selectedItemId === coupon.id\"\n            >\n              刪除\n            </button>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n\n  <!-- Pagination Component -->\n  <div class=\"py-5\">\n    <PaginationComp\n      :pagination=\"pagination\"\n      @get-request=\"getCoupons\"\n    ></PaginationComp>\n  </div>\n\n  <!-- CouponModal Component -->\n  <CouponModal\n    ref=\"modal\"\n    @post-coupon=\"postCoupon\"\n    @put-coupon=\"putCoupon\"\n  ></CouponModal>\n\n  <!-- DeleteModal Component -->\n  <DeleteModal\n    ref=\"deleteModal\"\n    @del-item=\"deleteCoupon\"\n  ></DeleteModal>\n</template>\n\n<script>\nimport CouponModal from '@/components/CouponModal.vue';\nimport PaginationComp from '@/components/PaginationComp.vue';\nimport DeleteModal from '@/components/DeleteModal.vue';\n\nexport default {\n  data() {\n    return {\n      coupons: [],\n      pagination: {},\n      selectedItemId: '', // disabled 按鈕用\n      loader: {},\n    };\n  },\n  components: {\n    CouponModal,\n    PaginationComp,\n    DeleteModal,\n  },\n  inject: ['emitter'],\n  methods: {\n    // 取得優惠券列表\n    getCoupons(page = 1) {\n      this.loader = this.$loading.show();\n      const apiUrl = `\n        ${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/coupons/?page=${page}\n      `;\n      this.$http.get(apiUrl)\n        .then((res) => {\n          const { coupons, pagination } = res.data;\n          this.coupons = coupons;\n          this.pagination = pagination;\n          this.loader.hide();\n        })\n        .catch((err) => {\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: '取得優惠券',\n            content: err.response.data.message,\n          });\n          this.loader.hide();\n        });\n    },\n    // 新增優惠券\n    postCoupon(coupon) {\n      const apiUrl = `\n        ${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/coupon\n      `;\n      this.$http.post(apiUrl, { data: coupon })\n        .then((res) => {\n          this.$refs.modal.closeModal();\n          this.getCoupons();\n          this.emitter.emit('push-message', {\n            style: 'success',\n            title: '新增優惠券',\n            content: `${res.data.message}：${coupon.title}`,\n          });\n        })\n        .catch((err) => {\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: '新增優惠券',\n            content: err.response.data.message,\n          });\n        });\n    },\n    // 更新優惠券\n    putCoupon(cid, coupon) {\n      this.selectedItemId = cid;\n      const apiUrl = `\n        ${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/coupon/${cid}\n      `;\n      this.$http.put(apiUrl, { data: coupon })\n        .then((res) => {\n          this.$refs.modal.closeModal();\n          this.getCoupons();\n          this.emitter.emit('push-message', {\n            style: 'primary',\n            title: '更新優惠券',\n            content: `${res.data.message}：${coupon.title}`,\n          });\n          this.selectedItemId = '';\n        })\n        .catch((err) => {\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: '更新優惠券',\n            content: err.response.data.message,\n          });\n          this.selectedItemId = '';\n        });\n    },\n    // 刪除優惠券\n    deleteCoupon(cid) {\n      this.selectedItemId = cid;\n      const apiUrl = `\n        ${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/coupon/${cid}\n      `;\n      this.$http.delete(apiUrl)\n        .then((res) => {\n          this.getCoupons();\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: '刪除優惠券',\n            content: res.data.message,\n          });\n          this.selectedItemId = '';\n          this.$refs.deleteModal.closeModal();\n        })\n        .catch((err) => {\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: '刪除優惠券',\n            content: err.response.data.message,\n          });\n          this.selectedItemId = '';\n          this.$refs.deleteModal.closeModal();\n        });\n    },\n  },\n  mounted() {\n    this.getCoupons();\n  },\n};\n</script>\n","<template>\n  <div class=\"modal fade\" ref=\"couponModal\" tabindex=\"-1\">\n    <div class=\"modal-dialog modal-dialog-centered modal-dialog-scrollable\">\n      <div class=\"modal-content border-0\">\n        <!-- isNewCoupon Start -->\n        <div v-if=\"isNewCoupon\">\n          <div class=\"modal-header bg-success\">\n            <h5 class=\"modal-title text-white\">\n              新增優惠券\n            </h5>\n            <button type=\"button\" class=\"btn-close bg-white\"\n              data-bs-dismiss=\"modal\" aria-label=\"Close\"\n            ></button>\n          </div>\n        </div>\n        <div v-else>\n          <div class=\"modal-header bg-primary\">\n            <h5 class=\"modal-title text-white\">\n              編輯優惠券\n            </h5>\n            <button type=\"button\" class=\"btn-close bg-white\"\n              data-bs-dismiss=\"modal\" aria-label=\"Close\"\n            ></button>\n          </div>\n        </div>\n        <!-- isNewCoupon End -->\n        <!-- Coupon Content Start -->\n        <div class=\"modal-body\">\n          <div class=\"mb-3\">\n            <label class=\"form-label\" for=\"coupon-title\">優惠券名稱</label>\n            <input\n              class=\"form-control\"\n              type=\"text\"\n              id=\"coupon-title\"\n              v-model=\"coupon.title\"\n              placeholder=\"請輸入優惠券名稱\"\n              required\n            />\n          </div>\n          <div class=\"mb-3\">\n            <label class=\"form-label\" for=\"coupon-code\">優惠碼</label>\n            <input\n              class=\"form-control\"\n              type=\"text\"\n              id=\"coupon-code\"\n              v-model=\"coupon.code\"\n              placeholder=\"請輸入優惠碼\"\n              required\n            />\n          </div>\n          <div class=\"mb-3\">\n            <label class=\"form-label\" for=\"coupon-due_date\">使用期限</label>\n            <input\n              class=\"form-control\"\n              type=\"date\"\n              id=\"coupon-due_date\"\n              v-model=\"due_date\"\n              required\n            />\n          </div>\n          <div class=\"mb-3\">\n            <label class=\"form-label\" for=\"coupon-percent\">優惠折扣（0%～100%）</label>\n            <input\n              class=\"form-control\"\n              type=\"number\"\n              id=\"coupon-percent\"\n              v-model.number=\"coupon.percent\"\n              placeholder=\"請輸入優惠折扣\"\n              min=\"0\"\n              max=\"100\"\n              oninput=\"this.value = !!this.value\n                && Math.abs(this.value) >= 0\n                && Math.abs(this.value) <= 100\n                ? Math.abs(this.value) : null\"\n              required\n            />\n          </div>\n          <div class=\"mb-3\">\n            <div class=\"form-check form-switch\">\n              <span class=\"fw-bold\">啟用狀態：</span>\n              <input\n                class=\"form-check-input\"\n                type=\"checkbox\"\n                id=\"is_enabled\"\n                v-model=\"coupon.is_enabled\"\n                :true-value=\"1\"\n                :false-value=\"0\"\n                required\n              />\n              <label v-if=\"coupon.is_enabled\"\n                class=\"form-check-label text-success fw-bold\"\n                for=\"is_enabled\"\n              >\n                已啟用\n              </label>\n              <label v-else\n                class=\"form-check-label text-muted\"\n                for=\"is_enabled\"\n              >\n                未啟用\n              </label>\n            </div>\n          </div>\n        </div>\n        <!-- Coupon Content End -->\n        <!-- Post or Put Start -->\n        <div class=\"modal-footer\">\n          <div v-if=\"isNewCoupon\">\n            <button\n              class=\"btn btn-success\"\n              type=\"button\"\n              @click=\"$emit('post-coupon', coupon)\"\n            >\n              確認新增\n            </button>\n          </div>\n          <div v-else>\n            <button\n              class=\"btn btn-primary\"\n              type=\"button\"\n              @click=\"$emit('put-coupon', coupon.id, coupon)\"\n            >\n              確認編輯\n            </button>\n          </div>\n          <button\n            class=\"btn btn-secondary\"\n            type=\"button\"\n            data-bs-dismiss=\"modal\"\n          >\n            取消\n          </button>\n        </div>\n        <!-- Post or Put End -->\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Modal from 'bootstrap/js/dist/modal';\n\nexport default {\n  data() {\n    return {\n      modal: {},\n      coupon: {},\n      due_date: '',\n      isNewCoupon: false,\n    };\n  },\n  methods: {\n    openModal(isNewCoupon, coupon) {\n      this.isNewCoupon = isNewCoupon;\n      // 判斷是否為「新增」或「編輯」優惠券\n      if (isNewCoupon) {\n        this.coupon = {};\n        this.due_date = '';\n      } else {\n        this.coupon = JSON.parse(JSON.stringify(coupon));\n        // 因 input type=\"date\" 只吃 YYYY-MM-DD 格式，所以改成用此方式抓時間\n        const dateAndTime = new Date(this.coupon.due_date * 1000).toISOString().split('T');\n        [this.due_date] = dateAndTime;\n      }\n      this.modal.show();\n    },\n    closeModal() {\n      this.modal.hide();\n    },\n  },\n  watch: {\n    // 若 due_date 有變更將更新 this.coupon.due_date\n    due_date() {\n      this.coupon.due_date = Math.floor(new Date(this.due_date) / 1000);\n    },\n  },\n  mounted() {\n    this.modal = new Modal(this.$refs.couponModal, {\n      backdrop: 'static',\n      keyboard: false,\n    });\n  },\n};\n</script>\n","import { render } from \"./CouponModal.vue?vue&type=template&id=1753f5e4\"\nimport script from \"./CouponModal.vue?vue&type=script&lang=js\"\nexport * from \"./CouponModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\@六角學院\\\\Vue3-Spring-2022\\\\Hex_Vue_Week7\\\\homework02\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./CouponsView.vue?vue&type=template&id=276cac0a\"\nimport script from \"./CouponsView.vue?vue&type=script&lang=js\"\nexport * from \"./CouponsView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\@六角學院\\\\Vue3-Spring-2022\\\\Hex_Vue_Week7\\\\homework02\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_2","type","onClick","$refs","modal","openModal","_hoisted_4","_createElementBlock","_Fragment","_renderList","$data","coupon","index","key","_toDisplayString","title","percent","Date","due_date","toLocaleDateString","_hoisted_6","is_enabled","disabled","id","_hoisted_10","deleteModal","_hoisted_11","_createVNode","_component_PaginationComp","pagination","onGetRequest","$options","_component_CouponModal","ref","onPostCoupon","onPutCoupon","_component_DeleteModal","onDelItem","tabindex","_hoisted_5","_hoisted_8","for","_hoisted_7","_hoisted_9","_hoisted_12","$event","placeholder","required","_hoisted_14","code","_hoisted_16","_hoisted_18","min","max","oninput","_hoisted_21","_hoisted_25","_ctx","_hoisted_26","_hoisted_27","data","isNewCoupon","methods","this","JSON","parse","stringify","dateAndTime","toISOString","split","show","closeModal","hide","watch","Math","floor","mounted","Modal","couponModal","backdrop","keyboard","__exports__","coupons","selectedItemId","loader","components","CouponModal","PaginationComp","DeleteModal","inject","getCoupons","page","$loading","apiUrl","$http","get","then","res","catch","err","emitter","emit","style","content","response","message","postCoupon","post","putCoupon","cid","put","deleteCoupon","delete","render"],"sourceRoot":""}